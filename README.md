Предметная область:

Банки предоставляют возможность своим клиентам осуществлять безналичные расчеты с помощью эмитируемых ими пластиковых карт и обналичивать деньги в банкоматах. Каждый банк обслуживает свои банкоматы и своих клиентов по вопросам эксплуатации эмитируемых им пластиковых карт. Если карточка клиента эмитирована банком, обслуживающим банкомат, то операция выдачи наличных денег банкоматом клиенту осуществляется бесплатно. Если же клиент некоторого банка обналичивает деньги в банкомате другого банка, то банкомат снимает комиссию которая устанавливается каждым банком отдельно. Клиенты осуществляют операции обналичивания денег в любое время суток и в любом банкомате. 
Необходимо спроектировать базу данных БАНКОМАТЫ, информация которой будет использоваться для анализа операций обналичивания денег клиентами в банкоматах разных банков, частоты обслуживания банкоматами клиентов с взыманием комиссионных вознаграждений, динамики операций обналичивания денег клиентами отдельных банков в разных банкоматах за определенные интервалы времени и др. 

При проектировании БД необходимо учитывать следующее: 
•	банк обслуживает несколько банкоматов. Банкомат обслуживается одним банком; 
•	банк обслуживает несколько клиентов. Клиент обслуживается одним банком; 
•	банкомат обслуживает несколько клиентов. Клиент обслуживается несколькими банкоматами; 
•	банкомат осуществляет несколько операций обналичивания денег. Операция обналичивания денег связана с одним банкоматом; 
•	клиент осуществляет несколько операций обналичивания денег. Операция обналичивания денег связана с одним банкоматом. 
•	каждый банк обязательно имеет в обслуживании банкоматы. Каждый банкомат обязательно обслуживается банком; 
•	каждый банк обязательно имеет клиентов. Каждый клиент обязательно обслуживается банком; 
•	каждый банкомат обязательно обслуживает клиентов. Каждый клиент обязательно обслуживается банкоматами; 
•	банкомат не обязательно осуществляет постоянно операции выдачи наличных денег. Каждая операция выдачи наличных денег обязательно связана с банкоматом; 
•	клиент не обязательно осуществляет операции обналичивания денег. Каждая операция обналичивания денег обязательно связана с клиентом.
![image](https://github.com/QFolli/bd_2/assets/88559269/731a69c2-06b5-4e5a-8631-7b2b7449b92e)
![image](https://github.com/QFolli/bd_2/assets/88559269/46a29312-7122-4669-b2ed-2fc2269733c7)

1NF
Отношение находится в первой нормальной форме тогда и только тогда, когда на пересечении каждого столбца и каждой строки находятся только элементарные значения атрибутов.
Данная даталогическая таблица находится в первой нормальной форме, и на пересечении каждого столбца и каждой строки находятся элементарный значения атрибутов.

2NF
Отношение находится во второй нормальной форме тогда и только тогда, когда оно находится в первой нормальной форме и не содержит неполных функциональных зависимостей непервичных атрибутов от атрибутов первичного ключа.
Отношения на находятся в первой нормальной форме и не содержат неполных функциональных зависимостей. Значит, мы прошли 2 этап нормализации отношений.

3NF
Отношение находится в третьей нормальной форме тогда и только тогда, когда оно находится во второй нормальной форме и не содержит транзитивных зависимостей. 
Данные отношения не имеют транзитивных зависимостей и находятся в третьей нормальной форме.

BCNF
Отношение находится в нормальной форме Бойса—Кодда, если оно находится в третьей нормальной форме и каждый детерминант отношения является возможным ключом отношения.
Наши отношения  находятся в нормальной форме Бойса-Кодда и не требуют разделения отношений.
4NF
Отношение R находится в четвертой нормальной форме (4NF) в том и только в том случае, если в случае существования многозначной зависимости A ->> B все остальные атрибуты R функционально зависят от A.
Соответствует четвертой нормальной форме.
5NF
Отношение R находится в пятой нормальной форме (нормальной форме проекции-соединения — PJ/NF) в том и только в том случае, когда любая зависимость соединения в R следует из существования некоторого возможного ключа в R.
Отношения находятся в пятой нормальной форме и не требуют нормализации.

Напишем SQL запросы для создания таблиц:
CREATE TABLE bank

(
    id     INT PRIMARY KEY,
    "name" VARCHAR(255) NOT NULL UNIQUE CHECK (LENGTH(Name) BETWEEN 2 AND 255)
);
CREATE TABLE atm
(
    number             INT PRIMARY KEY,
    address            VARCHAR(255) NOT NULL CHECK (LENGTH(Address) BETWEEN 2 AND 255),
    remaining_currency MONEY        NOT NULL,
    bank_id            INT          NOT NULL REFERENCES bank (id)
);
CREATE TABLE client
(
    passport_id INT PRIMARY KEY,
    first_name VARCHAR(20) NOT NULL CHECK (LENGTH(first_name) BETWEEN 2 AND 20),
    last_name  VARCHAR(20) NOT NULL CHECK (LENGTH(last_name) BETWEEN 2 AND 20),
    patronymic  VARCHAR(20) CHECK (LENGTH(last_name) BETWEEN 2 AND 20 or last name IS NULL),
    balance     MONEY        NOT NULL CHECK (balance >= '0'::MONEY),
    phone       VARCHAR(14) CHECK (LENGTH(phone) BETWEEN 5 AND 20 or phone IS NULL),
    address     VARCHAR(255) NOT NULL CHECK (LENGTH(Address) BETWEEN 8 AND 255),
    bank_id     INT          NOT NULL REFERENCES bank (id)
);

CREATE TABLE credit_card
(
    number             VARCHAR(16) PRIMARY KEY,
    validity_person    DATE     NOT NULL,
    cvv                SMALLINT NOT NULL CHECK (cvv BETWEEN 1 AND 999),
    fee                DECIMAL  NOT NULL CHECK (fee BETWEEN 1 AND 100),
    client_passport_id INT REFERENCES client (passport_id)
);
CREATE TABLE operation
(
    id                 INT PRIMARY KEY,
    "date"             DATE NOT NULL,
    amount             MONEY NOT NULL CHECK (amount > '0'::MONEY),
    atm_number         INT   NOT NULL REFERENCES atm (number),
    credit_card_number VARCHAR(16) REFERENCES credit_card (number)
);

Вывод: в ходе лабораторной работы мы разобрали данную нам предметную область, построили инфологическую модель, даталогическую и нормализовали её. После чего добавили суррогатные ключи.
Для создания базы данных в ms sql мы используем SQL инструкции создание таблиц с ограничением ввода данных.
